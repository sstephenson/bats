.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "BATSLIB" "7" "August 2015" "" ""
.
.SH "NAME"
\fBbatslib\fR \- Bats Standard Library of Test Helpers
.
.SH "DESCRIPTION"
The Standard Library is a collection of test helpers intended to simplify testing\. It helps building test suits that provide relevant information when a test fails to speed up debugging\.
.
.P
It contains the following types of test helpers\.
.
.IP "\(bu" 4
\fIASSERTIONS\fR are functions that perform a test and output relevant information on failure to help debugging\.
.
.IP "" 0
.
.P
Test helpers send all output to the standard error, making them usable outside of \fB@test\fR functions too\. Output is formatted for readability as described in \fIOUTPUT\fR\.
.
.P
The Standard Library is automatically loaded and available in all test files\.
.
.SH "OUTPUT"
On failure, in addition to the usual output generated by Bats, \fIASSERTIONS\fR display information relevant to the failed test to help debugging\. The output is formatted for readability and displayed as key\-value pairs on the standard error\.
.
.P
When the value is one line long, the pair is displayed in a columnar fashion called \fBtwo\-column\fR format\.
.
.IP "" 4
.
.nf

\-\- output differs \-\-
expected : want
actual   : have
\-\-
.
.fi
.
.IP "" 0
.
.P
When the value is longer than one line, the number of lines in the value is displayed after the key, and the value starts on the next line and is indented by two spaces for added readability\. This is called \fBmulti\-line\fR format\.
.
.P
For convenience, sometimes related values are also displayed in this format even if they are only one line long\.
.
.IP "" 4
.
.nf

\-\- output differs \-\-
expected (1 lines):
  want
actual (3 lines):
  have 1
  have 2
  have 3
\-\-
.
.fi
.
.IP "" 0
.
.SH "ASSERTIONS"
Assertions are functions that perform a test and output relevant information on failure to help debugging\. They return 1 on failure and 0 otherwise\.
.
.P
Assertions about exit code and output operate on the results of the most recent invocation of \fBrun\fR\.
.
.TP
\fBflunk\fR [\fIMESSAGE\fR]
Display \fIMESSAGE\fR and fail\. This function provides a convenient way to report various failures\. Other test helpers also use it to display output on failure\. When no parameters are specified, \fIMESSAGE\fR is read from the standard input\.
.
.TP
\fBassert\fR \fIEXPRESSION\fR
Fail if \fIEXPRESSION\fR evaluates to false\. On failure, \fIEXPRESSION\fR is displayed\.
.
.IP
\fBNote:\fR \fIEXPRESSION\fR can only be a simple command\. Compound commands, such as \fB[[\fR, are not supported\.
.
.TP
\fBassert_equal\fR \fIEXPECTED\fR \fIACTUAL\fR
Fail if \fIEXPECTED\fR and \fIACTUAL\fR do not equal\. On failure both values are displayed\. If either one is longer than one line, both are displayed in \fImulit\-line\fR format\.
.
.TP
\fBassert_output\fR [\fIEXPECTED\fR]
Fail if \fIEXPECTED\fR does not equal \fB$output\fR\. On failure both values are displayed\. If either one is longer than one line, both are displayed in \fImulit\-line\fR format\. When no parameters are specified, \fIEXPECTED\fR is read from the standard input\.
.
.TP
\fBassert_success\fR
Fail if \fB$status\fR is not \fB0\fR\. On failure \fB$status\fR and \fB$output\fR are displayed\. If \fB$output\fR is longer than one line, it is displayed in \fImulit\-line\fR format\.
.
.TP
\fBassert_failure\fR [\fIEXPECTED\fR]
When no parameters are specified, fail if \fB$status\fR is \fB0\fR\. On failure \fB$output\fR is displayed\. If \fB$output\fR is longer than one line, it is displayed in \fImulit\-line\fR format\.
.
.IP
When \fIEXPECTED\fR is specified and \fB$status\fR is not \fB0\fR, fail if \fIEXPECTED\fR does not equal \fB$output\fR\. On failure both values are displayed\. If either one is longer than one line, both are displayed in \fImulti\-line\fR format\.
.
.TP
\fBassert_line\fR [\fIINDEX\fR] \fILINE\fR
When only \fILINE\fR is specified, fail if \fB${lines[@]}\fR does not contain \fILINE\fR\. On failure \fILINE\fR and \fB$output\fR are displayed\. If \fB$output\fR is longer than one line, it is displayed in \fImulit\-line\fR format\.
.
.IP
When \fIINDEX\fR is specified, fail if \fILINE\fR does not equal \fB${lines[INDEX]}\fR\. On failure \fIINDEX\fR, \fILINE\fR and \fB${lines[INDEX]}\fR are dispalyed\.
.
.IP
\fBNOTE:\fR Due to a bug in Bats, empty lines are discarded, causing line indices to change and preventing testing for empty lines\. See \fIBUGS\fR for more\.
.
.TP
\fBrefute_line\fR [\fIINDEX\fR] \fILINE\fR
When only \fILINE\fR is specified, fail if \fB${lines[@]}\fR contains \fILINE\fR\. On failure \fILINE\fR, its zero\-based index in \fB${lines[@]}\fR, and \fB$output\fR are dispalyed\. If \fB$output\fR is longer than one line, it is displayed in \fImulit\-line\fR format with \fILINE\fR highlighted\.
.
.IP
When \fIINDEX\fR is specified, fail if \fILINE\fR equals \fB${lines[INDEX]}\fR\. On failure \fILINE\fR and \fIINDEX\fR are dispalyed\.
.
.IP
\fBNOTE:\fR Due to a bug in Bats, empty lines are discarded, causing line indices to change and preventing testing for empty lines\. See \fIBUGS\fR for more\.
.
.SH "BUGS"
.
.SS "Report bugs"
Report bugs on Bats\' GitHub issue tracker at \fIhttps://github\.com/sstephenson/bats/issues\fR\.
.
.SS "Known bugs"
Due to a bug in Bats, empty lines are missing from \fB${lines[@]}\fR, causing line indices to change and preventing testing for empty lines when using \fBassert_line\fR and \fBrefute_line\fR\. See PR #93 on Github at \fIhttps://github\.com/sstephenson/bats/pull/93\fR\.
.
.SH "COPYRIGHT"
TODO(ztombol): Find a suitable license\.
.
.SH "SEE ALSO"
\fBbash\fR(1), \fBbats\fR(1), \fBbats\fR(7)
